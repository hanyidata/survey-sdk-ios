(function(){var __webpack_modules__={8703:function(e,n,t){var s=t(9953);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=t(56).Z;r("8397ded8",s,!0,{sourceMap:!1,shadowMode:!1})},5666:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;module=__webpack_require__.nmd(module);var _typeof=__webpack_require__(6587)["default"];__webpack_require__(6926),__webpack_require__(8689),__webpack_require__(3373),__webpack_require__(2981),__webpack_require__(9818),__webpack_require__(9952),__webpack_require__(7604),function(e,n){"object"===_typeof(exports)&&"object"===_typeof(module)?module.exports=n():(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(self,(function(){return function(){var __webpack_modules__={"./node_modules/@hanyi/survey-expression-next/dist/index.js":
/*!******************************************************************!*\
          !*** ./node_modules/@hanyi/survey-expression-next/dist/index.js ***!
          \******************************************************************/
function node_modulesHanyiSurveyExpressionNextDistIndexJs(module){eval('!function(t,e){if(true)module.exports=e();else { var i, s; }}(self,(()=>(()=>{var t={488:(t,e,s)=>{"use strict";s.d(e,{Z:()=>Ot});const i=/<[^>]*>/g,r="ASS",n="EOF",a="STR",l="NUM",u="ADD",o="SUB",h="MUL",c="DIV",f="EQ",p="NEQ",v="ID",d="DOT",y="COMMA",b="LPAREN",k="RPAREN",x="LBRACKET",m="RBRACKET",A="AND",g="OR",w="GT",j="GTE",E="LT",P="LTE",O="NOT",_="IGT",S="IGTE",I="ILT",T="ILTE",N="EXP",M="VAR",R="OP",C="MEM",L="MFUN",V="LOGIC",W="ARRAY",D="syntax error";function F(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class G{constructor(t){F(this,"type",void 0),F(this,"token",void 0),this.type=N,this.token=t}}class B extends G{constructor(t,e,s){super(null),F(this,"left",void 0),F(this,"operator",void 0),F(this,"right",void 0),this.type=R,this.left=t,this.operator=e,this.right=s}}class U extends G{constructor(t){super(t),this.type=M}}class Z extends G{constructor(t){super(null),this.type=W,this.items=t}}class $ extends G{constructor(t,e){super(null),this.left=t,this.step=e,this.type=C}}class z extends G{constructor(t,e,s){super(null),this.type=V,this.left=t,this.operator=e,this.right=s}}class K extends G{constructor(t,e,s){super(null),this.left=t,this.func=e,this.params=s,this.type=L}}function Q(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class J{constructor(t){Q(this,"tokens",void 0),Q(this,"ast",void 0),Q(this,"variables",void 0),this.tokens=t,this.variables=[],this.ast=this._parse(n)}_createVarNode(t){let e=new U(t);return t.test(v)&&this.variables.push(t.value),e}_parseParam(t){let e=[],s=null;for(let i=0;i<t.length;i++){const r=t[i];r.test(x)?s=[]:r.test(m)?(e.push(new Z(s)),s=null):null!=s?s.push(this._createVarNode(r)):e.push(this._createVarNode(r))}return e}_parseSimple(){let t,e=this.tokens.current();for(;e&&!e.test(n)&&!e.testAny(m,k);){if(e.testAny(v,l,a))t=this._createVarNode(this.tokens.eat());else if(e.test(d)){if(this.tokens.next(),!t)throw D;if(this.tokens.expectPair(v,b,k)){let e=this.tokens.current().value,s=this.tokens.eatPair(v,b,k),i=this._parseParam(s);t=new K(t,e,i)}else{let e=new G(this.tokens.next());t=new $(t,e)}}else if(e.testAny(f,p,w,j,E,P,u,o,c,h,_,S,I,T)){if(!t)throw D;let e=new G(this.tokens.next()),s=null;s=this.tokens.current().testAny(v,l,a)?this._createVarNode(this.tokens.eat()):this._parse(),t=new B(t,e,s)}else{if(!e.testAny(b))throw D;if(t)throw D;this.tokens.next(),t=this._parseSimple()}if(e=this.tokens.current(),e&&e.testAny(A,g))return t}return e&&e.testAny(k)&&this.tokens.next(),t}_parse(){let t=this.tokens.current(),e=null;for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];for(;t&&!t.test(n)&&!t.testAny(i);){if(t.test(O)){let t=new G(this.tokens.eat()),s=this._parseSimple();if(!s)throw D;e=new z(s,t,null)}else if(t.testAny(A,g)){if(!e)throw D;let t=new G(this.tokens.next()),s=this._parseSimple();if(!s)throw D;e=new B(e,t,s)}else if(t.testAny(b))this.tokens.next(),e=this._parseSimple();else if(e=this._parseSimple(),!e)return D;t=this.tokens.current()}return e}}function X(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class Y{constructor(){X(this,"index",void 0),X(this,"tokens",void 0),this.index=0,this.tokens=[]}add(t){this.tokens.push(t)}current(){return this.tokens[this.index]}next(){return this.tokens[this.index++]}eat(){let t=this.index;return this.index++,this.tokens[t]}eatPair(t,e,s){let i=[];if(this.expectPair(t,e,s)){this.index=this.index+2;for(let t=this.index;t<this.tokens.length;t++){const e=this.tokens[t];if(this.index++,e.test(s))break;e.test(y)||i.push(e)}this.index++}return i}look(t){return this.tokens[this.index+(t||1)]}has(t){return this.tokens.filter(((e,s)=>s>this.index&&e.test(t))).length>0}count(){return this.tokens.length}leftCount(){return this.tokens.length-this.index-1}expectPair(t,e,s){const i=this.current();return i&&this.leftCount()>2&&i.test(t)&&this.look().test(e)&&this.has(s)}eof(){return this.tokens[this.index].type===n}}function q(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class H{constructor(t,e){q(this,"type",void 0),q(this,"value",void 0),this.type=t,this.value=e}test(t){return this.type===t}testAny(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.indexOf(this.type)>-1}}function tt(t,e){return!t&&!e||!(!t||!e)&&(typeof t==typeof e&&(Array.isArray(t)||Array.isArray(e)?t.length===e.length&&t.every(((t,s)=>t===e[s])):t===e))}function et(t){return/[0-9]/i.test(t)}function st(t){return/[a-z_A-Z]/i.test(t)}function it(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class rt{constructor(t){if(it(this,"source",void 0),it(this,"end",void 0),it(this,"offset",void 0),it(this,"column",void 0),it(this,"b",void 0),this.source=t,this.end=this.source.length,0===this.end)throw D;this.offset=0,this.column=0}lex(){const t=new Y;let e;for(;!this.eof();){const s=this.current();if(" "!==s){switch(!0){case"-"===s:let t=this.look();this.next(),e=et(t)?new H(l,"-"+this.readNumber()):new H(o,s);break;case et(s):e=new H(l,this.readNumber());break;case"\'"===s||\'"\'===s:e=new H(a,this.readString(s));break;case st(s):const i=this.readIdentifier();switch(i){case"and":e=new H(A,i);break;case"or":e=new H(g,i);break;default:e=new H(v,i)}break;default:e=this.lexPunctuation()}t.add(e)}else this.next()}return t.add(new H(n,"eof")),t}lexPunctuation(){let t,e,s=this.current();switch(s){case"=":t=r,"="===this.look()&&(t=f,s="==",this.next());break;case"!":t=O,"="===this.look()&&(t=p,s="!=",this.next()),"<"===this.look()&&(t=I,s="!<",this.next(),"="===this.look()&&(t=T,s="!<=",this.next())),">"===this.look()&&(t=_,s="!>",this.next(),"="===this.look()&&(t=S,s="!>=",this.next()));break;case"<":t=E,e=this.look(),"="===e&&(t=P,s="<=",this.next());break;case">":t=w,e=this.look(),"="===e&&(t=j,s=">=",this.next());break;case"and":t=A,e=this.look();break;case"or":t=g,e=this.look();break;case"+":t=u,e=this.look();break;case"-":t=o,e=this.look();break;case"*":t=h;break;case"/":t=c;break;case"(":t=b;break;case"[":t=x;break;case")":t=k;break;case"]":t=m;break;case",":t=y;break;case".":t=d;break;default:throw D+" "+s}return this.next(),new H(t,s)}readNumber(){let t=!1;return this.readIf((e=>"."===e?!t&&(t=!0,!0):et(e)))}readString(t){this.next();const e=this.readIf((e=>e!==t));return this.next(),e}readIdentifier(){return this.readIf((t=>function(t){return/[a-zA-Z_0-9]/i.test(t)}(t)))}readIf(t){const e=[];for(;!this.eof();){const s=this.next();if(!t(s)){this.offset--,this.column--;break}e.push(s)}return e.join("")}next(){const t=this.source.charAt(this.offset++);return this.column++,t}look(){return this.source.charAt(this.offset+1)}current(){return this.source.charAt(this.offset)}eof(){return""===this.current()}}function nt(t){if(!this||!t)return!1;let e=null;return e="object"==typeof this?this.value:this,null!=e&&(Array.isArray(e)?Array.isArray(t)?t.every((t=>e.includes(t))):e.includes(t):t.includes(e))}function at(t){if(!this||!t)return!1;let e=null;return e="object"==typeof this?this.value:this,null!=e&&(Array.isArray(e)?Array.isArray(t)?!t.every((t=>e.includes(t))):!e.includes(t):!t.includes(e))}function lt(t,e){if(!(this&&this.value&&t&&this.items&&this.tags&&e&&Array.isArray(e)))return!1;const s=this.items.filter((e=>e.value===t));return this.value==t&&0!==s.length&&e.some((t=>this.tags.includes(t)))}function ut(t){return null!=this&&null!=this&&("string"==typeof this?this.includes(t):"object"==typeof this&&null!=this.value&&null!=this.value&&this.value.toString().includes(t))}function ot(t){return null!=this&&null!=this&&("string"==typeof this?!this.includes(t):"object"==typeof this&&null!=this.value&&null!=this.value&&!this.value.toString().includes(t))}function ht(t){return null!=this&&null!=this&&("string"==typeof this?this.startsWith(t):"object"==typeof this&&null!=this.value&&null!=this.value&&this.value.toString().startsWith(t))}function ct(t){return null!=this&&null!=this&&("string"==typeof this?this.endsWith(t):"object"==typeof this&&null!=this.value&&null!=this.value&&this.value.toString().endsWith(t))}function ft(){return null!=this&&null!=this&&("string"==typeof this?""===this:null==this.value||null==this.value||""===this.value)}function pt(){return null!=this&&null!=this&&("string"==typeof this?""!=this:null!=this.value&&null!=this.value&&""!=this.value)}function vt(t){return ut.apply(this.comment,[t])}function dt(t){return ht.apply(this.comment,[t])}function yt(t){return ct.apply(this.comment,[t])}function bt(){if(!this||!this.value||!this.items)return 0;return Array.isArray(this.value)?this.value.length:1}function kt(){const t=Array.isArray(this.value)?this.value.length:1;return this.items.length-t}function xt(){if(!this||!this.value||!this.items)return"";let t=[];return t=Array.isArray(this.value)?this.items.filter((t=>this.value.includes(t.value))).map((t=>t.text)):this.items.filter((t=>this.value===t.value)).map((t=>t.text)),t.join(",").replace(i,"")}function mt(){if(!this||!this.items)return"";let t=[];return t=Array.isArray(this.value)?this.items.filter((t=>!this.value.includes(t.value))).map((t=>t.text)):this.items.filter((t=>t.value!==this.value)).map((t=>t.text)),t.join(",").replace(i,"")}function At(){if(!this||!this.value||!this.items)return[];let t=[],e={};this.alias&&this.alias.headers.length>0&&this.alias.rows.length>0&&(e=this.alias.rows.reduce(((t,e)=>(t[e.item]=e,t)),{}));const s=this.items.reduce(((t,e)=>(t[e.value]=e.text.replace(i,""),t)),{});return t=Array.isArray(this.value)?this.items.filter((t=>this.value.includes(t.value))).map((t=>({value:t.value,text:s[t.value],...e[t.value]||{}}))):this.items.filter((t=>this.value===t.value)).map((t=>({value:t.value,text:s[t.value],...e[t.value]||{}}))),t}function gt(){if(!this||!this.items)return[];let t=[],e={};this.alias&&this.alias.headers.length>0&&this.alias.rows.length>0&&(e=this.alias.rows.reduce(((t,e)=>(t[e.item]=e,t)),{}));let s=this.items.reduce(((t,e)=>(t[e.value]=e.text.replace(i,""),t)),{});return t=Array.isArray(this.value)?this.items.filter((t=>!this.value.includes(t.value))).map((t=>({value:t.value,text:s[t.value],...e[t.value]||{}}))):this.items.filter((t=>t.value!==this.value)).map((t=>({value:t.value,text:s[t.value],...e[t.value]||{}}))),t}var wt,jt;const Et=(wt={contains:ut,notContains:ot,startsWith:ht,endsWith:ct,isEmpty:ft,notEmpty:pt,selected:nt,unselected:at,selectedAnyTag:lt,commentContains:vt,commentStartsWith:dt,commentEndsWith:yt},jt={selectedCount:bt,unselectedCount:kt,selectedText:xt,unselectedText:mt,selectedItems:At,unselectedItems:gt},{registerFunction:function(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=s?t:`$${t}`;wt[i]=e},getFunction:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e?t:`$${t}`;return wt[s]},getAttribute:function(t){return jt[t]},hasAttribute:function(t){return t in jt}});function Pt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class Ot{constructor(t){Pt(this,"parser",void 0),Pt(this,"context",void 0),Pt(this,"variables",void 0),Pt(this,"expression",void 0),this.expression=t,this.parser=new J(new rt(t).lex())}evaluate(t){return this.context=t,this.parser&&this.parser.ast?this.visit(this.parser.ast):null}getVariables(){var t;return(null===(t=this.parser)||void 0===t?void 0:t.variables)||[]}getTokens(){var t;return(null===(t=this.parser)||void 0===t?void 0:t.tokens)||[]}getAst(){var t;return(null===(t=this.parser)||void 0===t?void 0:t.ast)||[]}visit(t){switch(t.type){case R:return this.visitOperator(t);case M:return this.visitVariable(t);case C:return this.visitMember(t);case L:return this.visitMemberFunction(t);case V:return this.visitLogic(t);case W:return this.visitArray(t);default:throw D+" "+t.type}}visitOperator(t){let e=this.visit(t.left),s=this.visit(t.right);if(null==e||null==s)return!1;switch(t.operator.token.type){case f:return tt(e,s);case p:return!tt(e,s);case u:return e+s;case o:return e-s;case h:return e*s;case c:return e/s;case A:return e&&s;case g:return e||s;case w:return e>s;case j:return e>=s;case E:return e<s;case P:return e<=s;case I:return-1!=e&&e<s;case T:return-1!=e&&e<=s;case _:return-1!=e&&e>s;case S:return-1!=e&&e>=s;default:throw D+" "+t.operator.token.value}}visitVariable(t){switch(t.token.type){case l:return parseInt(t.token.value);case a:return t.token.value;case v:return this.context[t.token.value];default:throw D}}visitMember(t){let e=this.visit(t.left);const s=t.step.token.value;if(e){if(Et.hasAttribute(s)){return Et.getAttribute(s).apply(e)}if(!Array.isArray(e))return e[s]??null;if("count"===s)return e.length;if(e.length>0&&e[0][s])return e.filter((t=>null!=t[s])).map((t=>t[s])).join(",")}return null}visitArray(t){let e=[];return t.items.forEach((t=>{let s=this.visit(t);e.push(s)})),e}visitLogic(t){let e=this.visit(t.left);if(t.operator.token.type===O)return!e;throw D}visitMemberFunction(t){let e=this.visit(t.left),s=Et.getFunction(t.func),i=[];if(t.params.forEach((t=>{let e=this.visit(t);i.push(e)})),null!=s&&null!=e){return s.apply(e,i)}return null}}},579:(t,e,s)=>{const i=s(488).Z,{version:r}=s(147);t.exports={ExpressionEvaluator:i,version:r}},147:t=>{"use strict";t.exports=JSON.parse(\'{"name":"@hanyi/survey-expression-next","version":"0.1.6","description":"survey expression pure ast version","main":"dist/index.js","files":["dist"],"scripts":{"test":"node ./node_modules/jest/bin/jest.js --runInBand","build":"webpack --mode=production","build:report":"webpack --config ./webpack.config.js --env report=true"},"dependencies":{},"sideEffects":false,"devDependencies":{"@babel/plugin-proposal-class-properties":"^7.14.5","@babel/preset-env":"^7.14.5","babel-loader":"^8.2.2","jest":"^27.0.4","terser-webpack-plugin":"^5.3.6","webpack":"^5.50.0","webpack-bundle-analyzer":"^4.7.0","webpack-cli":"^4.7.2"},"engines":{"node":">=14"},"browserslist":["defaults and supports es6-module"]}\')}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}return s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s(579)})()));\n\n//# sourceURL=webpack://$/./node_modules/@hanyi/survey-expression-next/dist/index.js?')},"./src/adapter.js":
/*!************************!*\
          !*** ./src/adapter.js ***!
          \************************/
function srcAdapterJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Adapter": () => (/* binding */ Adapter)\n/* harmony export */ });\n/**\n * 适配层，主要负责适配API，以及storage \n */\nclass Adapter {\n  /**\n   * API请求，接口类似axios\n   * @param {*} options \n   */\n  async request(options) {\n    // 这里uni不同版本会封装，\n    let _res = await uni.request(options);\n    if (Array.isArray(_res)) {\n      if (!_res[0]) {\n        return _res[1];\n      }\n      throw _res[0];\n    } else {\n      return _res;\n    }\n  }\n\n  /**\n   * 获取存储单元\n   * @param {*} key \n   * @returns \n   */\n  getStorageSync(key) {\n    return uni.getStorageSync(key);\n  }\n\n  /**\n   * 设置存储单元\n   * @param {*} key \n   * @returns \n   */\n  setStorageSync(key, value) {\n    return uni.setStorageSync(key, value);\n  }\n\n  /**\n   * 删除存储单元\n   * @param {*} key \n   * @returns \n   */\n  removeStorageSync(key) {\n    uni.removeStorageSync(key);\n  }\n}\n\n//# sourceURL=webpack://$/./src/adapter.js?')},"./src/api.js":
/*!********************!*\
          !*** ./src/api.js ***!
          \********************/
function srcApiJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SurveyApi\": () => (/* binding */ SurveyApi)\n/* harmony export */ });\nconst ENV_MAPS = {\n  'development': 'https://dev.xmplus.cn/api/survey',\n  'test': 'https://test.xmplus.cn/api/survey',\n  'production': 'https://www.xmplus.cn/api/survey'\n};\n\n/**\n * API Service\n */\nclass SurveyApi {\n  constructor(adapter, env) {\n    this.adapter = adapter;\n    this.env = env;\n    this.serviceUrl = ENV_MAPS[this.env];\n    console.info('init survey api with ' + this.serviceUrl);\n  }\n\n  /**\n   * load survey from server side\n   */\n  async loadSurvey(surveyId, channelId, clientId) {\n    let parameters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    console.info(\"load survey ##4 \" + surveyId + \" with clientId: \" + clientId);\n    let data = {\n      ...parameters,\n      ...{\n        channelId: channelId,\n        collectorMethod: 'MP'\n      }\n    };\n    console.debug(data);\n    let response = await this.adapter.request({\n      method: \"POST\",\n      url: this.serviceUrl + \"/surveys/\" + surveyId + '/start/' + clientId,\n      data: data\n    });\n    if (!response || !response.data) {\n      throw '系统错误';\n    } else if (response.data.code !== 200) {\n      console.error('failed to load survey ' + surveyId);\n      throw response.data.message;\n    } else return response.data.data;\n  }\n\n  /**\n   * 提交答案\n   */\n  async sendResult(surveyId, data) {\n    // TBD, 服务器端必须不再使用这个字段更新\n    data.collectorMethod = 'MP';\n    let response = await this.adapter.request({\n      method: \"POST\",\n      url: this.serviceUrl + \"/surveys/\" + surveyId + '/submit',\n      data: data\n    });\n    // console.log('sendResult response',response)\n    if (!response || !response.data) {\n      throw '系统错误';\n    } else if (response.data.code !== 200) {\n      console.error('failed to sendResult ' + surveyId);\n      throw response.data.message;\n    }\n    return response.data.data;\n  }\n}\n\n//# sourceURL=webpack://$/./src/api.js?")},"./src/builder.js":
/*!************************!*\
          !*** ./src/builder.js ***!
          \************************/
function srcBuilderJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ModelBuilder\": () => (/* binding */ ModelBuilder)\n/* harmony export */ });\n/* harmony import */ var _models_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models/page */ \"./src/models/page.js\");\n/* harmony import */ var _models_question__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./models/question */ \"./src/models/question.js\");\n/* harmony import */ var _models_question_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/question_item */ \"./src/models/question_item.js\");\n/* harmony import */ var _survey__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./survey */ \"./src/survey.js\");\n/* harmony import */ var _models_logic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./models/logic */ \"./src/models/logic.js\");\n/* harmony import */ var _models_channel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./models/channel */ \"./src/models/channel.js\");\n/* harmony import */ var _models_question_multiple_choice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./models/question_multiple_choice */ \"./src/models/question_multiple_choice.js\");\n/* harmony import */ var _models_question_text__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./models/question_text */ \"./src/models/question_text.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n\n\n\n\n\n\n\n\n\nconst MODELS = {\n  'page': _models_page__WEBPACK_IMPORTED_MODULE_0__.PageModel,\n  'question': _models_question__WEBPACK_IMPORTED_MODULE_1__.QuestionModel,\n  'survey': _survey__WEBPACK_IMPORTED_MODULE_3__.SurveyModel,\n  'logic': _models_logic__WEBPACK_IMPORTED_MODULE_4__.SurveyLogic,\n  'channel': _models_channel__WEBPACK_IMPORTED_MODULE_5__.SurveyChannel,\n  'question_item': _models_question_item__WEBPACK_IMPORTED_MODULE_2__.QuestionItemModel\n};\n\n// 自定义检验规则 文件注册\nconst QUESTIONS = {\n  'MULTIPLE_CHOICES': _models_question_multiple_choice__WEBPACK_IMPORTED_MODULE_6__.MultipleChoiceQuestionModel,\n  'TEXT': _models_question_text__WEBPACK_IMPORTED_MODULE_7__.TextQuestionModel\n};\n\n/**\n * Model构建器\n */\nclass ModelBuilder {\n  static buildSurvey(json, service) {\n    // TBD\n    // 需要开启，否则不会支持class响应式\n    // https://github.com/didi/mpx/blob/796cbef70db327e2f3b7cbf0976c73190cc02a6b/packages/core/src/helper/utils.js#L226\n    // mpx.config.observeClassInstance = true;\n    // global.__mpx.config.observeClassInstance = true\n    let rawQuestions = this.buildQuestions(json.questions);\n    // 支持有限题型\n    rawQuestions = rawQuestions.filter(x => ['GROUP', 'SEPARATOR', 'TEXT', 'SINGLE_CHOICE', 'MULTIPLE_CHOICES', 'SCORE', 'EVALUATION', 'SCORE_EVALUATION'].includes(x.type));\n    let survey = this.buildEntityByType(\"survey\", json);\n    survey.service = service;\n    let {\n      pages\n    } = this.resort(rawQuestions, survey.pageMode);\n    survey.pages = pages;\n    survey._currentPage = pages[0];\n    return survey;\n  }\n  static buildQuestions(items) {\n    let result = [];\n    items.forEach(item => {\n      let model = QUESTIONS[item.type] || _models_question__WEBPACK_IMPORTED_MODULE_1__.QuestionModel;\n      // console.debug('buildQuestionsItem', item.type)\n      let obj = this.buildEntityByModel(model, item);\n      result.push(obj);\n    });\n    return result;\n  }\n\n  // 生成数组类型的数据\n  static buildList(type, items) {\n    let result = [];\n    items.forEach((item, index) => {\n      let obj = this.buildEntityByType(type, item);\n      result.push(obj);\n    });\n    return result;\n  }\n\n  // 生成对象类型的数据\n  static buildEntityByType(type, json) {\n    let model = MODELS[type];\n    if (!model) {\n      console.error('invalid model', type, MODELS['survey'], MODELS.survey);\n    }\n    return this.buildEntityByModel(model, json);\n  }\n\n  // 根据传入的类型，生成数据\n  static buildEntityByModel(model, json) {\n    let tmp = {\n      ...json,\n      ...{}\n    };\n    if (!model) {\n      console.error('invalid model', model, json);\n      throw \"invalid model\";\n    }\n    let fields = model.fields;\n    // console.error('fields',fields)\n    Object.keys(fields).forEach(f => {\n      const field = fields[f];\n      let jsons = json[f];\n      if (jsons && field && field.target && field.type === \"references\") {\n        let items = this.buildList(field.target, jsons); //_currentPage: this.reference('page') 中 field.target为'page'\n        tmp[f] = items;\n      }\n      if (jsons && field && field.target && field.type === \"reference\") {\n        let items = this.buildEntityByType(field.target, jsons);\n        tmp[f] = items;\n      }\n    });\n    let result = new model(tmp);\n    return result;\n  }\n\n  /**\n   * 一题一页\n   * @param {*} pages\n   */\n  static splitByQuestionPerPage(groups) {\n    let no = 0;\n    let pages = [];\n    groups.forEach(group => {\n      for (let index = 0; index < group.questions.length; index++) {\n        const question = group.questions[index];\n        if (question.type != 'SEPARATOR') {\n          let pageModel = new _models_page__WEBPACK_IMPORTED_MODULE_0__.PageModel({});\n          pageModel._index = no;\n          pageModel.id = 'page_' + no;\n          pageModel.questions = [question];\n          pages.push(pageModel);\n          no = no + 1;\n        }\n      }\n    });\n    return pages;\n  }\n\n  /**\n   * 题目分组\n   */\n  static groupQuestion(questions) {\n    // 历史原因， question->groupCode保存的是name\n    let groupMaps = (0,_util__WEBPACK_IMPORTED_MODULE_8__.reverseMap)(questions.filter(x => x.type === \"GROUP\"), \"name\");\n    let groupQuestions = {};\n    questions.forEach(question => {\n      let groupCode = question.groupCode;\n      if (groupCode) {\n        let group = groupMaps[groupCode];\n        if (!group) {\n          console.warn(\"missing group for \" + groupCode);\n        }\n        if (!groupQuestions[groupCode]) {\n          groupQuestions[groupCode] = {\n            id: group.id,\n            title: group.title,\n            name: group.name,\n            sequence: group.sequence,\n            visibleIf: group.visibleIf,\n            questions: []\n          };\n        }\n        groupQuestions[groupCode].questions.push(question);\n      }\n    });\n    let groups = Object.values(groupQuestions);\n    groups.sort((a, b) => a.sequence - b.sequence);\n    return groups;\n  }\n\n  /**\n   * 自动分页\n   *  - 分组自动做一页\n   *  - 分隔符\n   * @param {*} pages\n   */\n  static splitByStandard(groups) {\n    let no = -1;\n    let result = [];\n    groups.forEach(group => {\n      let page = new _models_page__WEBPACK_IMPORTED_MODULE_0__.PageModel({});\n      no++;\n      page._index = no;\n      page.id = 'page_' + no;\n      let questions = [];\n      for (let index = 0; index < group.questions.length; index++) {\n        let question = group.questions[index];\n        if (question.type === 'SEPARATOR') {\n          if (questions.length > 0) {\n            // 切断\n            page.questions = questions;\n            result.push(page);\n            page = new _models_page__WEBPACK_IMPORTED_MODULE_0__.PageModel({});\n            no++;\n            page._index = no;\n            page.id = 'page_' + no;\n            questions = [];\n            continue;\n          }\n        } else {\n          questions.push(question);\n        }\n      }\n      page.questions = questions;\n      result.push(page);\n    });\n    return result;\n  }\n\n  /**\n   * 重新整理题目\n   */\n  static resort(questions, pageMode) {\n    // 题组切割, 优先保证题组切割，之后问题顺序才能有保证\n    let groups = this.groupQuestion(questions);\n    let result = [];\n    groups.forEach(group => {\n      for (let index = 0; index < group.questions.length; index++) {\n        result.push(group.questions[index]);\n      }\n    });\n    let pages = [];\n    if (pageMode === \"STANDARD\") {\n      pages = this.splitByStandard(groups);\n    } else if (pageMode === \"QUESTION_PER_PAGE\") {\n      pages = this.splitByQuestionPerPage(groups);\n    } else {\n      throw 'invalid page mode ' + pageMode;\n    }\n\n    // clean up\n    pages = pages.filter(x => x.questions.length > 0);\n\n    // 重新计算编号\n    (0,_util__WEBPACK_IMPORTED_MODULE_8__.calculateNo)(result);\n    return {\n      pages: pages,\n      groups: groups,\n      questions: result\n    };\n  }\n}\n\n//# sourceURL=webpack://$/./src/builder.js?")},"./src/index.js":
/*!**********************!*\
          !*** ./src/index.js ***!
          \**********************/
function srcIndexJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Adapter": () => (/* reexport safe */ _adapter__WEBPACK_IMPORTED_MODULE_2__.Adapter),\n/* harmony export */   "SurveyModel": () => (/* reexport safe */ _survey__WEBPACK_IMPORTED_MODULE_0__.SurveyModel),\n/* harmony export */   "SurveyService": () => (/* reexport safe */ _service__WEBPACK_IMPORTED_MODULE_1__.SurveyService),\n/* harmony export */   "state": () => (/* reexport safe */ _state__WEBPACK_IMPORTED_MODULE_3__.state),\n/* harmony export */   "stateWatch": () => (/* reexport safe */ _state__WEBPACK_IMPORTED_MODULE_3__.stateWatch),\n/* harmony export */   "subscribe": () => (/* reexport safe */ _state__WEBPACK_IMPORTED_MODULE_3__.subscribe),\n/* harmony export */   "trigger": () => (/* reexport safe */ _state__WEBPACK_IMPORTED_MODULE_3__.trigger),\n/* harmony export */   "unsubscribe": () => (/* reexport safe */ _state__WEBPACK_IMPORTED_MODULE_3__.unsubscribe)\n/* harmony export */ });\n/* harmony import */ var _survey__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./survey */ "./src/survey.js");\n/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./service */ "./src/service.js");\n/* harmony import */ var _adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter */ "./src/adapter.js");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./state */ "./src/state.js");\n\n\n\n\n\n\n//# sourceURL=webpack://$/./src/index.js?')},"./src/models/base.js":
/*!****************************!*\
          !*** ./src/models/base.js ***!
          \****************************/
function srcModelsBaseJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "BaseModel": () => (/* binding */ BaseModel)\n/* harmony export */ });\n/**\n * 底层模型，为了更好的支持响应式类\n * - reactiveField：通过Object.defineProperty定义响应属性\n * - fields 描述需要定义的字段\n */\nclass BaseModel {\n  static fields = {};\n  constructor(json) {\n    this._props = {};\n    const fields = this.constructor.fields;\n    Object.keys(fields).forEach(f => {\n      let field = fields[f];\n      let val = json[f];\n      if (val && field.type === \'jsonstring\') {\n        val = JSON.parse(val);\n      }\n      this._props[f] = f in json ? val : field.default;\n    });\n    Object.keys(fields).forEach(f => {\n      let field = fields[f];\n      this.reactiveField(f, field);\n    });\n  }\n  reactiveField(name, field) {\n    Object.defineProperty(this, name, {\n      enumerable: true,\n      configurable: true,\n      get: () => {\n        if (name in this._props) {\n          let val = this._props[name];\n          return val;\n        }\n        // console.debug(field.default, "getfield->default->" + name);\n        return field.default;\n      },\n      set: val => {\n        // console.debug(val, this, "setfield->" + name);\n        this._props[name] = val;\n      }\n    });\n  }\n  static string(val) {\n    return {\n      type: "string",\n      default: val\n    };\n  }\n  static long(val) {\n    return {\n      type: "long",\n      default: val\n    };\n  }\n  static any(val) {\n    return {\n      type: "any",\n      default: val\n    };\n  }\n  static bool(val) {\n    return {\n      type: "bool",\n      default: val\n    };\n  }\n  static array(items) {\n    return {\n      type: "array",\n      default: items\n    };\n  }\n  static references(target) {\n    return {\n      type: "references",\n      default: [],\n      target: target\n    };\n  }\n  static reference(target) {\n    return {\n      type: "reference",\n      default: null,\n      target: target\n    };\n  }\n  static jsonstring() {\n    return {\n      type: "jsonstring",\n      default: \'\'\n    };\n  }\n  static object(value) {\n    return {\n      type: "object",\n      default: value\n    };\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/base.js?')},"./src/models/channel.js":
/*!*******************************!*\
          !*** ./src/models/channel.js ***!
          \*******************************/
function srcModelsChannelJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "SurveyChannel": () => (/* binding */ SurveyChannel)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/models/base.js");\n\nclass SurveyChannel extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    configure: this.jsonstring("")\n  };\n  constructor(json) {\n    super(json);\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/channel.js?')},"./src/models/logic.js":
/*!*****************************!*\
          !*** ./src/models/logic.js ***!
          \*****************************/
function srcModelsLogicJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "SurveyLogic": () => (/* binding */ SurveyLogic)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/models/base.js");\n\nclass SurveyLogic extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    expression: this.string(""),\n    type: this.string(""),\n    target: this.string("")\n  };\n  constructor(json) {\n    super(json);\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/logic.js?')},"./src/models/page.js":
/*!****************************!*\
          !*** ./src/models/page.js ***!
          \****************************/
function srcModelsPageJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "PageModel": () => (/* binding */ PageModel)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/models/base.js");\n\nclass PageModel extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    visibleIf: this.string(""),\n    questions: this.references("question"),\n    _index: this.long(0),\n    _visible: this.bool(true)\n  };\n  constructor(json) {\n    super(json);\n  }\n\n  /**\n   * 判定是否空\n   */\n  get isEmpty() {\n    let isEmpty = false;\n    if (this.questions.length === 0) {\n      isEmpty = true;\n    } else {\n      isEmpty = this.questions.filter(x => x.isVisible).length === 0;\n    }\n    // console.log("isEmpty",this.id,JSON.stringify(this.questions.map(item=>[item.code,item.isVisible,item._skips])))\n    return isEmpty;\n  }\n  validate() {\n    let result = true;\n    if (this.questions) {\n      for (let index = 0; index < this.questions.length; index++) {\n        const question = this.questions[index];\n        // console.log("page validate",question.code,question._visible,question._skips,!question.validate())\n        if (question._visible && question._skips <= 0 && !question.validate()) {\n          result = false;\n        }\n      }\n    }\n    return result;\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/page.js?')},"./src/models/question.js":
/*!********************************!*\
          !*** ./src/models/question.js ***!
          \********************************/
function srcModelsQuestionJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "QuestionModel": () => (/* binding */ QuestionModel)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/models/base.js");\n\nclass QuestionModel extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    name: this.string(""),\n    code: this.string(""),\n    sequence: this.long(0),\n    title: this.string(""),\n    type: this.string(""),\n    groupCode: this.string(""),\n    items: this.references("question_item"),\n    labels: this.long(2),\n    visibleIf: this.string(""),\n    isRequired: this.bool(false),\n    min: this.long(1),\n    //量表题，最小值\n    max: this.long(10),\n    //量表题，最大值\n    enableValidator: this.bool(false),\n    //评价题，是否开启验证方式（标签是数量限制）\n    minLength: this.long(),\n    //评价题，标签最小数量; 文本题（多行文本），答案最小字数\n    maxLength: this.long(),\n    //评价题，标签最大数量; 文本题（多行文本），答案最大字数\n    placeHolder: this.string(""),\n    // isInputReadOnly: this.bool(false), //文本题只读设置（暂无此配置）\n    inputType: this.string(""),\n    areaType: this.string(""),\n    itemLayout: this.string(""),\n    isDefaultValue: this.bool(false),\n    evaluationValue: this.string(""),\n    hasOther: this.bool(false),\n    configure: this.string(""),\n    //打分评价题自定义表情\n    showLabel: this.bool(false),\n    //是否显示量表题的标签\n    inapplicable: this.bool(false),\n    //是否开启不适用\n    inapplicableLabel: this.string(""),\n    //不适用文案\n    labelLayout: this.string(""),\n    // 标签自适应‘ADAPTIVE’\n\n    // 内置字段\n    _valid: this.bool(true),\n    _error: this.string(""),\n    _skips: this.long(0),\n    _visible: this.bool(true),\n    _index: this.long(0),\n    _no: this.long(0),\n    _value: this.any(null),\n    _comment: this.any(null),\n    _tags: this.any(null)\n  };\n  constructor(json) {\n    super(json);\n    this._visible = this.visibleIf ? false : true;\n  }\n\n  /**\n   * 判断是否显示\n   */\n  get isVisible() {\n    return this._visible && this._skips <= 0;\n  }\n\n  /**\n   * 更新答案值\n   */\n  updateValue(val) {\n    let comment = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let tags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    this._value = val;\n    this._comment = comment;\n    this._tags = tags;\n  }\n  validateError() {\n    let error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this._valid = false;\n    this._error = error || \'请回答此问题\';\n    return false;\n  }\n\n  /**\n   * 校验\n   * @returns \n   */\n  validate() {\n    // value必填校验\n    // console.log("question validate",this.code,this._value)\n    if (this.isRequired && (this._value === null || this._value === undefined || Array.isArray(this._value) && this._value.length == 0)) {\n      return this.validateError();\n    }\n    // comment必填校验 e.g 单,多选，输入框必填校验\n    if (this.items && this.items.length > 0) {\n      for (let i = 0; i < this.items.length; i++) {\n        const item = this.items[i];\n        if (item.isRequired && this._value.indexOf(item.value) > -1 && (!this._comment || this._comment.indexOf(item.value) === -1)) {\n          return this.validateError(\'输入框不能为空\');\n        }\n      }\n    }\n    // 选项标签tags必填校验 e.g 表情评价题,打分评价题\n    if (this.enableValidator && (this.type == \'EVALUATION\' || this.type == \'SCORE_EVALUATION\')) {\n      let errorText = \'标签选择数量必须\' + (this.minLength != null ? \'大于等于\' + this.minLength + \'个\' : \'\') + (this.maxLength != null ? (this.minLength != null ? \'且\' : \'\') + \'小于等于\' + this.maxLength + \'个\' : \'\');\n      if (!this._tags || this._tags.length == 0 || this.minLength !== null && this.minLength > this._tags.length || this.maxLength !== null && this.maxLength < this._tags.length) {\n        return this.validateError(errorText);\n      }\n    }\n    this._valid = true;\n    return true;\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/question.js?')},"./src/models/question_item.js":
/*!*************************************!*\
          !*** ./src/models/question_item.js ***!
          \*************************************/
function srcModelsQuestion_itemJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "QuestionItemModel": () => (/* binding */ QuestionItemModel)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/models/base.js");\n\nclass QuestionItemModel extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    code: this.string(""),\n    text: this.string(""),\n    value: this.string(""),\n    visibleIf: this.string(""),\n    sequence: this.long(0),\n    isRequired: this.bool(false),\n    //是否设置文本必填\n    configure: this.string(""),\n    //标签1，标签2\n    comment: this.string(""),\n    //textarea\n    enableTextInput: this.bool(false) //是否开启文本输入\n\n    // 内置字段\n  };\n}\n\n//# sourceURL=webpack://$/./src/models/question_item.js?')},"./src/models/question_multiple_choice.js":
/*!************************************************!*\
          !*** ./src/models/question_multiple_choice.js ***!
          \************************************************/
function srcModelsQuestion_multiple_choiceJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MultipleChoiceQuestionModel\": () => (/* binding */ MultipleChoiceQuestionModel)\n/* harmony export */ });\n/* harmony import */ var _question__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./question */ \"./src/models/question.js\");\n\nclass MultipleChoiceQuestionModel extends _question__WEBPACK_IMPORTED_MODULE_0__.QuestionModel {\n  constructor(json) {\n    super(json);\n\n    // 扩展定义额外字段\n    // this.reactiveField('x', {type: 'string', default: 'xxxx'})\n  }\n\n  /**\n   * 自定义验证\n   */\n  validate() {\n    if (!super.validate()) {\n      return false;\n    }\n    // 多选题选项数量校验\n    if (this.enableValidator && this.type == 'MULTIPLE_CHOICES' && this._value) {\n      if (this.minLength != null && this.maxLength != null) {\n        if (this.minLength > this._value.length || this.maxLength < this._value.length) return this.validateError('选项数量必须在 ' + this.minLength + ' - ' + this.maxLength + ' 个之间');\n      } else {\n        if (this.minLength != null && this.minLength > this._value.length) {\n          return this.validateError('选项数量至少 ' + this.minLength + ' 个');\n        }\n        if (this.maxLength !== null && this.maxLength < this._value.length) {\n          return this.validateError('选项数量不能超过 ' + this.maxLength + ' 个');\n        }\n      }\n    }\n    // TBD 自定义逻辑\n    this._valid = true;\n    return true;\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/question_multiple_choice.js?")},"./src/models/question_text.js":
/*!*************************************!*\
          !*** ./src/models/question_text.js ***!
          \*************************************/
function srcModelsQuestion_textJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TextQuestionModel\": () => (/* binding */ TextQuestionModel)\n/* harmony export */ });\n/* harmony import */ var _question__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./question */ \"./src/models/question.js\");\n\nclass TextQuestionModel extends _question__WEBPACK_IMPORTED_MODULE_0__.QuestionModel {\n  constructor(json) {\n    super(json);\n\n    // 扩展定义额外字段\n    // this.reactiveField('x', {type: 'string', default: 'xxxx'})\n  }\n\n  /**\n   * 自定义验证\n   */\n  validate() {\n    if (!super.validate()) {\n      return false;\n    }\n    // 文本题（单行，多行文本） TEXTAREA\n    if (this.enableValidator && this.type == 'TEXT' && this._value) {\n      if (this.minLength != null && this.maxLength != null) {\n        if (this.minLength > this._value.length || this.maxLength < this._value.length) return this.validateError('答案长度必须在 ' + this.minLength + ' - ' + this.maxLength + ' 个字符之间');\n      } else {\n        if (this.minLength != null && this.minLength > this._value.length) {\n          return this.validateError('答案长度至少 ' + this.minLength + ' 个字符');\n        }\n        if (this.maxLength !== null && this.maxLength < this._value.length) {\n          return this.validateError('答案长度不能超过 ' + this.maxLength + ' 个字符');\n        }\n      }\n    }\n    // TBD 自定义逻辑\n    this._valid = true;\n    return true;\n  }\n}\n\n//# sourceURL=webpack://$/./src/models/question_text.js?")},"./src/service.js":
/*!************************!*\
          !*** ./src/service.js ***!
          \************************/
function srcServiceJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SurveyService\": () => (/* binding */ SurveyService)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api */ \"./src/api.js\");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./storage */ \"./src/storage.js\");\n/* harmony import */ var _builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./builder */ \"./src/builder.js\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./state */ \"./src/state.js\");\n\n\n\n\n\nclass SurveyService {\n  constructor(adapter, env) {\n    this.adapter = adapter;\n    this.env = env;\n    this.storage = new _storage__WEBPACK_IMPORTED_MODULE_2__.SurveyStorage(this.adapter);\n    this.api = new _api__WEBPACK_IMPORTED_MODULE_1__.SurveyApi(this.adapter, this.env);\n    this.sessions = {};\n\n    // init to global\n    console.debug('setup to global');\n    (0,_state__WEBPACK_IMPORTED_MODULE_4__.commit)('service', this);\n    (0,_state__WEBPACK_IMPORTED_MODULE_4__.commit)('api', this.api);\n    (0,_state__WEBPACK_IMPORTED_MODULE_4__.commit)('storage', this.storage);\n    (0,_state__WEBPACK_IMPORTED_MODULE_4__.commit)('adapter', this.adapter);\n  }\n\n  /**\n   * 加载问卷\n   * @returns\n   */\n  async loadSurveyFromServer(surveyId, channelId, options) {\n    let parameters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    // 本地storage获取优先\n    // console.debug(options, 'loadSurvey',parameters)\n    const clientIdKey = this._buildCacheKey(surveyId, \"clientId\");\n    let clientId = this.storage.ensureItem(clientIdKey, (0,_util__WEBPACK_IMPORTED_MODULE_0__.uuid)());\n    try {\n      let surveyInfo = await this.api.loadSurvey(surveyId, channelId, clientId, parameters);\n      // 免打扰判断\n      if (surveyInfo.doNotDisturb) {\n        const msg = '开启免打扰配置，该问卷无法打开';\n        throw msg;\n      }\n\n      // merge override part...\n      if (options && options.survey) {\n        surveyInfo = {\n          ...surveyInfo,\n          ...options.survey\n        };\n      }\n      let survey = this.loadSurveyFromJson(surveyId, clientId, channelId, surveyInfo);\n      // if (options && options.survey) {\n      //   surveyInfo = {...surveyInfo, ...options.survey}\n      // }\n      return survey;\n    } catch (error) {\n      let msg = error || '系统错误';\n      console.error('loadSurveyFromServer error', error);\n      throw msg;\n    }\n  }\n\n  /**\n   * loadSurveyFromJson\n   * @param {*} surveyId \n   * @param {*} clientId \n   * @param {*} channelId \n   * @param {*} surveyInfo \n   * @param {*} parameters \n   * @returns \n   */\n  loadSurveyFromJson(surveyId, clientId, channelId, surveyInfo) {\n    let parameters = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    console.debug(`load survey from json sid: ${surveyId} cid: ${clientId} channel: ${channelId}`, surveyInfo);\n    let survey = _builder__WEBPACK_IMPORTED_MODULE_3__.ModelBuilder.buildSurvey(surveyInfo, this); // 将surveyInfo处理成survey，包括支持题型控制，pages, _currentPage，groups\n    survey._parameters = parameters;\n    // 保存session相关信息\n    this.startSession(survey, clientId, channelId, survey.responseId, parameters);\n    setTimeout(() => {\n      (0,_state__WEBPACK_IMPORTED_MODULE_4__.commit)('survey', survey);\n      (0,_state__WEBPACK_IMPORTED_MODULE_4__.trigger)('load', survey);\n    }, 1);\n    return survey;\n  }\n  async submit(surveyId, data) {\n    let finish = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    console.debug('service->submit', surveyId, finish);\n    let result = await this.api.sendResult(surveyId, data);\n    if (finish) this.finishSession(surveyId);\n    return result;\n  }\n\n  /**\n   * 标记开始答题\n   * @param {*} survey \n   * @param {*} clientId \n   * @param {*} channelId \n   * @param {*} responseId \n   * @param {*} parameters \n   */\n  startSession(survey, clientId, channelId, responseId, parameters) {\n    this.sessions[survey.id] = {\n      clientId: clientId,\n      channelId: channelId,\n      responseId: responseId,\n      parameters: parameters\n    };\n  }\n\n  /**\n   * 标记完成\n   */\n  finishSession(surveyId) {\n    console.debug('finishSession for survey ' + surveyId);\n    const clientIdKey = this._buildCacheKey(surveyId, \"clientId\");\n    this.storage.removeItem(clientIdKey);\n  }\n\n  /**\n   * 保证survey独立性, 缓存key的格式是 <surveyId>_<key>\n   */\n  _buildCacheKey(surveyId, key) {\n    return surveyId + \"_\" + key;\n  }\n}\n\n//# sourceURL=webpack://$/./src/service.js?")},"./src/state.js":
/*!**********************!*\
          !*** ./src/state.js ***!
          \**********************/
function srcStateJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "commit": () => (/* binding */ commit),\n/* harmony export */   "state": () => (/* binding */ state),\n/* harmony export */   "stateWatch": () => (/* binding */ stateWatch),\n/* harmony export */   "subscribe": () => (/* binding */ subscribe),\n/* harmony export */   "trigger": () => (/* binding */ trigger),\n/* harmony export */   "unsubscribe": () => (/* binding */ unsubscribe)\n/* harmony export */ });\n// global state with manual watchable\nvar state = {\n  survey: null,\n  service: null,\n  api: null,\n  adapter: null,\n  storage: null,\n  handlers: []\n};\n\n/**\n * 更改\n */\nfunction commit(key, value) {\n  console.debug(`commit ${key}`, value);\n  state[key] = value;\n}\n\n/**\n * 事件\n */\nfunction trigger(event, params) {\n  // console.debug(`trigger ${event}`, params, state.handlers);\n  state.handlers.forEach(handler => {\n    try {\n      handler(event, params);\n    } catch (error) {\n      console.warn(\'got error when trigger event\', error);\n    }\n  });\n}\n\n/**\n * 订阅事件\n */\nfunction subscribe(callback) {\n  state.handlers.push(callback);\n  // console.debug(`subscribe`, callback, state.handlers);\n}\n\n/**\n * 取消订阅事件\n */\nfunction unsubscribe(callback) {\n  state.handlers = state.handlers.filter(x => x != callback);\n}\n\n/**\n * 监听属性\n * @param {*} key \n * @param {*} callback \n */\nfunction stateWatch(key, callback) {\n  Object.defineProperty(state, key, {\n    get: function () {\n      return this.value;\n    },\n    set: function (newValue) {\n      this.value = newValue;\n      callback(this.value);\n    }\n  });\n}\n\n//# sourceURL=webpack://$/./src/state.js?')},"./src/storage.js":
/*!************************!*\
          !*** ./src/storage.js ***!
          \************************/
function srcStorageJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "SurveyStorage": () => (/* binding */ SurveyStorage)\n/* harmony export */ });\n/**\n * Storage\n */\nclass SurveyStorage {\n  constructor(adapter) {\n    this.adapter = adapter; // this.adapter = new Adapter()\n  }\n\n  getItem(key) {\n    return this.adapter.getStorageSync(key);\n  }\n  setItem(key, value) {\n    return this.adapter.setStorageSync(key, value);\n  }\n  removeItem(key) {\n    return this.adapter.removeStorageSync(key);\n  }\n\n  /**\n   * 获取对应的数据，如果没有同时初始化成指定数值\n   * @param {*} key\n   * @param {*} value\n   * @returns\n   */\n  ensureItem(key, value) {\n    let val = this.adapter.getStorageSync(key);\n    if (val === "") {\n      this.adapter.setStorageSync(key, value);\n      val = value;\n    }\n    return val;\n  }\n}\n\n//# sourceURL=webpack://$/./src/storage.js?')},"./src/survey.js":
/*!***********************!*\
          !*** ./src/survey.js ***!
          \***********************/
function srcSurveyJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SurveyModel\": () => (/* binding */ SurveyModel)\n/* harmony export */ });\n/* harmony import */ var _models_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models/base */ \"./src/models/base.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n/* harmony import */ var _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @hanyi/survey-expression-next */ \"./node_modules/@hanyi/survey-expression-next/dist/index.js\");\n/* harmony import */ var _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _trigger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./trigger */ \"./src/trigger.js\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./state */ \"./src/state.js\");\n\n\n\n\n\n\n/**\n * 触发器定义表\n */\nconst TRIGGERS_MAP = {\n  VISIBLE: _trigger__WEBPACK_IMPORTED_MODULE_2__.VisibleTrigger,\n  GOTO: _trigger__WEBPACK_IMPORTED_MODULE_2__.GotoTrigger,\n  COMPLETE: _trigger__WEBPACK_IMPORTED_MODULE_2__.CompleteTrigger,\n  FINISH: _trigger__WEBPACK_IMPORTED_MODULE_2__.FinishTrigger\n};\nclass SurveyModel extends _models_base__WEBPACK_IMPORTED_MODULE_0__.BaseModel {\n  static fields = {\n    id: this.long(),\n    responseId: this.long(),\n    title: this.string(\"\"),\n    status: this.string(\"\"),\n    pageMode: this.string(\"STANDARD\"),\n    pages: this.references(\"page\"),\n    //数组类型\n    logics: this.references(\"logic\"),\n    questions: this.references(\"question\"),\n    style: this.object({}),\n    embed: this.object({}),\n    channel: this.reference(\"channel\"),\n    concludingRemark: this.string(\"\"),\n    abnormalConcludingRemark: this.string(\"\"),\n    brandLogo: this.string(\"\"),\n    showBrand: this.bool(true),\n    questionNumberMode: this.string(\"\"),\n    _currentPage: this.reference('page'),\n    //reference：单个对象\n    _show: this.bool(false),\n    _valid: this.bool(true),\n    _version: this.long(0),\n    _isFinished: this.bool(false),\n    // 是否结束问卷\n    _isEarlyCompleted: this.bool(false),\n    // 是否提前结束\n    _parameters: this.object({}),\n    _startTime: this.long(new Date())\n  };\n  constructor(json) {\n    super(json);\n    this.handlers = {};\n    this._questionsMaps = {};\n    this._questions = null;\n    this.triggers = {};\n    this.callbacks = {};\n    this.buildAll();\n  }\n\n  // 总停留时长\n  get timeSpent() {\n    const now = new Date().getTime();\n    const seconds = Math.round((now - this._startTime.getTime()) / 1000);\n    return seconds;\n  }\n  getAllQuestions() {\n    if (this._questions) {\n      return this._questions;\n    }\n    let result = [];\n    this.pages.forEach(page => {\n      page.questions.forEach(q => result.push(q));\n    });\n    this._questions = result;\n    return this._questions;\n  }\n\n  // 获取截止当前页的问题列表\n  getAllQuestionsToCurrentPage(pageIndex) {\n    let result = [];\n    this.pages.forEach((page, index) => {\n      if (index <= pageIndex) {\n        page.questions.forEach(q => result.push(q));\n      }\n    });\n    return result;\n  }\n  getQuestionsMap(field) {\n    if (this._questionsMaps[field]) {\n      return this._questionsMaps[field];\n    }\n    let questions = this.getAllQuestions();\n    this._questionsMaps[field] = (0,_util__WEBPACK_IMPORTED_MODULE_1__.reverseMap)(questions, field);\n    return this._questionsMaps[field];\n  }\n  getQuestionByName(key) {\n    let qMap = this.getQuestionsMap(\"name\");\n    return qMap[key];\n  }\n  getQuestionByCode(key) {\n    let qMap = this.getQuestionsMap(\"code\");\n    return qMap[key];\n  }\n\n  /**\n   * 获取当前答案值 (expression 专用，带有items)\n   */\n  getValuesMap() {\n    let ignoreInvisible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    let result = {};\n    this.getAllQuestions().forEach(q => {\n      if (!ignoreInvisible || q.isVisible) {\n        result[q.name] = {\n          value: q._value,\n          items: q.items\n        };\n      }\n    });\n    return result;\n  }\n\n  /**\n   * \n   */\n  get data() {\n    return this.getValues();\n  }\n\n  /**\n   * 获取当前答案值 (提交专用)\n   *  - 获取到当前页面？\n   *  - TBD\n   */\n  getValues() {\n    let ignoreInvisible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    let result = {};\n    this.getAllQuestions().forEach(q => {\n      if (q._value != null && (!ignoreInvisible || q.isVisible)) {\n        result[q.name] = q._value;\n        if (q._comment) {\n          result[q.name + '-Comment'] = q._comment;\n        }\n        if (q._tags) {\n          result[q.name + '-Tags'] = q._tags;\n        }\n      }\n    });\n    return result;\n  }\n\n  // 获取全量提交截止到当前页的答卷数据\n  getValuesToCurrentPage() {\n    let ignoreInvisible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    let pageIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let result = {};\n    this.getAllQuestionsToCurrentPage(pageIndex).forEach(q => {\n      if (q._value != null && (!ignoreInvisible || q.isVisible)) {\n        result[q.name] = q._value;\n        if (q._comment) {\n          result[q.name + '-Comment'] = q._comment;\n        }\n        if (q._tags) {\n          result[q.name + '-Tags'] = q._tags;\n        }\n      }\n    });\n    return result;\n  }\n  /**\n   *\n   * @param {*} cb\n   */\n  registerHandler(event, cb) {\n    if (!this.handlers[event]) {\n      this.handlers[event] = [];\n    }\n    this.handlers[event].push(cb);\n  }\n\n  /**\n   * 设置问题可见性\n   */\n  showQuestion(key, visible) {\n    let question = this.getQuestionByName(key);\n    if (question) {\n      question._visible = visible;\n      if (!visible) {\n        // 隐藏的时候需要再次触发改变\n        this.onValueChanged(key, null);\n      }\n    }\n    (0,_util__WEBPACK_IMPORTED_MODULE_1__.calculateNo)(this.getAllQuestions());\n  }\n\n  /**\n   * 恢复问卷初始状态\n   */\n  // reset() {\n  //   let questions = this.getAllQuestions();\n  //   for (let index = 0; index < questions.length; index++) {\n  //     const question = questions[index];\n  //     question._value = null;\n  //     question._visible = question.visibleIf ? false : true;\n  //     question._skips = 0;\n  //   }\n  // }\n\n  /**\n   * trigger回调，结束问卷\n   * @param {*} source \n   * @param {*} target \n   * @param {*} status \n   */\n  finish(isEarlyCompleted) {\n    console.debug('finish survey isEarlyCompleted: ' + isEarlyCompleted);\n    this._isFinished = true;\n    this._isEarlyCompleted = isEarlyCompleted;\n  }\n\n  /**\n   * 跳转到目标题\n   * @param {*} source\n   * @param {*} target\n   */\n  gotoQuestion(source, target, status) {\n    const from = this.getQuestionByName(source);\n    const to = this.getQuestionByName(target);\n    if (from === undefined) {\n      console.warn(\"missing from question \" + source);\n      return;\n    }\n    if (to === undefined) {\n      console.warn(\"missing to question \" + target);\n      return;\n    }\n    let questions = this.getAllQuestions();\n    const sourceIndex = questions.findIndex(x => x.id === from.id);\n    const targetIndex = questions.findIndex(x => x.id === to.id);\n    for (var i = sourceIndex + 1; i < targetIndex; i++) {\n      // 找到trigger当前题目到跳转题目的区间范围\n      // names.push(this.survey.questions[i].name);\n      let question = questions[i];\n      question._skips = question._skips + (status ? 1 : -1);\n    }\n    (0,_util__WEBPACK_IMPORTED_MODULE_1__.calculateNo)(questions);\n  }\n\n  /**\n   *\n   * @param {*} question\n   * @param {*} value\n   * @param {*} comment\n   * @param {*} tags\n   */\n  updateValue(key, value) {\n    let comment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let tags = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    let question = this.getQuestionByName(key);\n    if (question) {\n      question._value = value;\n      question._comment = comment;\n      question._tags = tags;\n      this.onValueChanged(key, value);\n    }\n  }\n  validate() {\n    if (this.pages) {\n      this.pages.forEach(page => {\n        let result = page.validate();\n        if (!result) {\n          return false;\n        }\n      });\n    }\n    return true;\n  }\n\n  /**\n   * 注册callback\n   * @param {*} type \n   * @param {*} callback \n   */\n  registerCallback(type, callback) {\n    this.callbacks[type] = callback;\n  }\n\n  /**\n   * 构建所有内部逻辑\n   */\n  buildAll() {\n    // 加载逻辑\n    this.triggers = {};\n    this._buildVisibleDependency();\n    this._buildLogic();\n    this.registerHandler('ValueChanged', this.onValueChanged.bind(this));\n  }\n\n  /**\n   * 更改答案值\n   * @param {*} key \n   * @param {*} value \n   * @param {*} comment \n   * @param {*} tags \n   */\n  updateQuestionValue(key, value) {\n    let comment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let tags = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    this.updateValue(key, value, comment, tags);\n  }\n\n  /**\n   * 答案改变\n   */\n  onValueChanged(key, answer) {\n    console.debug('[service] onValueChanged->' + key);\n    let context = this.getValuesMap();\n    this._runTriggers(key, context);\n  }\n\n  /**\n   * 问题可见属性发生变化\n   * @param {*} key\n   */\n  onQuestionVisibleChange(key) {\n    (0,_util__WEBPACK_IMPORTED_MODULE_1__.calculateNo)(this.questions);\n  }\n\n  // 回到上一页\n  performPrevPage() {\n    let visiblePages = this.pages.filter(item => !item.isEmpty);\n    let _index = visiblePages.findIndex(item => item._index === this._currentPage._index);\n    let prev_index = _index > 0 ? visiblePages[_index - 1]._index : -1;\n    console.log(this.pages.map(item => [item.id, item._index]), prev_index);\n    let prevPage = this.pages.filter(item => item._index === prev_index) || null;\n    if (prevPage) {\n      this._currentPage = this.pages[prevPage[0]._index];\n    } else console.error('不存在上一页数据');\n  }\n  performNextPage() {\n    let visiblePages = this.pages.filter(item => !item.isEmpty);\n    let _index = visiblePages.findIndex(item => item._index === this._currentPage._index);\n    let next_index = visiblePages.length - 1 > _index ? visiblePages[_index + 1]._index : -1;\n    let nextPage = this.pages.filter(item => item._index === next_index) || null;\n    console.debug(\"nextPage_index\", nextPage, nextPage[0]._index);\n    if (nextPage) {\n      this._currentPage = this.pages[nextPage[0]._index];\n    } else console.error('不存在下一页数据');\n  }\n\n  /**\n   * 开始问卷会话\n   * @param {*} survey \n   */\n  // async startSession() {\n  //   console.log('startSession')\n  //   let session = this.sessions[this.id]\n  //   if (!session.clientId) {\n  //     const clientIdKey = this._buildCacheKey(this.id, \"clientId\");\n  //     let clientId = this.storage.ensureItem(clientIdKey, uuid());\n  //     let parameters = survey._parameters;\n  //     let response = await this.api.loadSurvey(this.id, session.channelId, clientId, parameters);\n  //     let surveyInfo = response.data;\n  //     session.clientId = clientId\n  //     session.responseId = surveyInfo.responseId\n  //     session.parameters = parameters\n  //     this.sessions = session;\n  //     console.debug('new survey session ' + this.id + ' client id ' + session.clientId + ' response ' + session.responseId)\n  //   }\n  //   console.debug('reuse survey session ' + this.id + ' client id ' + session.clientId + ' response ' + session.responseId)\n  // }\n\n  /**\n   * 结束问卷会话\n   */\n  // finishSession() {\n  //   this.reset()\n  //   console.debug('finishSession for survey ' + this.id)\n  //   const clientIdKey = this._buildCacheKey(this.id, \"clientId\");\n  //   this.storage.removeItem(clientIdKey)\n  //   delete this.sessions[this.id]\n  // }\n  /**\n   * run single expression\n   * @param {*} expression \n   * @returns \n   */\n  runExpression(expression) {\n    let context = this.getValuesMap();\n    let evaluator = new _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4__.ExpressionEvaluator(expression);\n    return evaluator.evaluate(context);\n  }\n\n  /**\n   * explain expression\n   * @param {*} expression \n   * @returns \n   */\n  explainExpression(expression) {\n    let evaluator = new _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4__.ExpressionEvaluator(expression);\n    let ast = evaluator.getAst();\n    let tokens = evaluator.getTokens();\n    let version = _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_4__.version;\n    return {\n      version,\n      ast,\n      tokens\n    };\n  }\n\n  /**\n   * 执行页面逻辑\n   */\n  _runPageTriggers(page) {\n    let context = this.getValuesMap();\n    // 计算当前页所有依赖项\n    let keys = page.questions.map(q => q.name);\n    let pageTriggers = [];\n    keys.forEach(key => {\n      if (this.triggers[key]) {\n        let depTriggers = this.triggers[key].filter(x => x.triggerOnNextPage);\n        pageTriggers = pageTriggers.concat(depTriggers);\n      }\n    });\n    pageTriggers.forEach(trigger => {\n      console.debug(`run page trigger ${trigger.expression}`, trigger, context);\n      trigger.run(this, null, context);\n    });\n  }\n\n  /**\n   * 根据逻辑依赖表实时触发显示/跳转逻辑 \n   * @param {*} key\n   */\n  _runTriggers(key, context) {\n    // console.debug(' _runTriggers ',key,context, this.triggers)\n    if (key in this.triggers) {\n      let triggers = this.triggers[key]; //获取当前问题身上绑定的所有逻辑\n      // console.log('triggers',triggers)\n      triggers.forEach(trigger => {\n        if (!trigger.triggerOnNextPage) {\n          try {\n            // console.debug(trigger.expression, context, 'run trigger -> ' + key)\n            trigger.run(this, key, context);\n          } catch (error) {\n            console.warn(\"trigger got unexpected error \" + error);\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * 构建答题数据\n   * @returns \n   */\n  buildResponseData(session, isCompleted) {\n    let data = {};\n    // 点击下一页时，提交截止到当前页\n    let pageIndex = this._currentPage._index;\n    let surveyValue = pageIndex == null ? this.getValues() : this.getValuesToCurrentPage(true, pageIndex);\n    data.clientId = session.clientId;\n    data.responseId = session.responseId;\n    data.channelId = session.channelId;\n    data.isEarlyCompleted = this._isEarlyCompleted;\n    data.isCompleted = this._isEarlyCompleted ? true : this._isFinished;\n    data.data = surveyValue;\n    data.durationSeconds = this.timeSpent;\n    // console.log(\"pages\",this.pages.map(item=>[item._visible,JSON.stringify(item.questions.map(item=>item.code))]))\n    return data;\n  }\n\n  /**\n   * performNext\n   * @param {*} isComplete\n   */\n  async performNext(sessionInfo) {\n    let parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let _currentPage = this._currentPage;\n    let isOk = _currentPage.validate();\n    // console.debug(isOk, 'performSubmit->validate')\n    if (!isOk) {\n      //表单校验失败\n      return false;\n    }\n    this._runPageTriggers(_currentPage);\n    // console.debug('performNext isFinished: ' + this._isFinished)\n    // 点击下一页时，提交截止到当前页\n    let data = this.buildResponseData(sessionInfo);\n    data = {\n      ...data,\n      ...parameters\n    };\n    // this.sessions[this.id] = sessionInfo;\n\n    try {\n      let result = await _state__WEBPACK_IMPORTED_MODULE_3__.state.service.submit(this.id, data, this._isFinished);\n      console.debug('result', result);\n      return result;\n    } catch (error) {\n      console.error(\"performNext error\", error);\n      throw error;\n    }\n  }\n  async performPrevious() {}\n  async performSubmit(sessionInfo) {\n    let parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let _currentPage = this._currentPage;\n    // console.debug('performSubmit before->validate')\n    let isOk = _currentPage.validate();\n    this._isFinished = true;\n    // console.debug(isOk, 'performSubmit->validate')\n    if (!isOk) {\n      //表单校验失败\n      return false;\n    }\n    this._runPageTriggers(_currentPage);\n    // console.debug('performSubmit isFinished: ' + this._isFinished)\n    // this.sessions[this.id] = sessionInfo;\n    let data = this.buildResponseData(sessionInfo);\n    data = {\n      ...data,\n      ...parameters\n    };\n    try {\n      let result = await _state__WEBPACK_IMPORTED_MODULE_3__.state.service.submit(this.id, data, true);\n      console.debug('result', result);\n      // TBD\n      // if (this.callbacks['SUBMIT']) {\n      //   this.callbacks['SUBMIT']()\n      // }\n      return result;\n    } catch (error) {\n      console.error(\"performSubmit error\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * 注册逻辑依赖\n   *  - 显示逻辑 question->visibleIf\n   *  - 跳转逻辑 survey->logics\n   *  - 文本加载 question->title\n   *\n   *  {\n   *      type: 'visible' | 'goto' | 'pipe',\n   *      question: // target question\n   *      expression: // expression\n   *      evaluator: //\n   *  }\n   */\n  _registerTrigger(trigger) {\n    const variables = trigger.variables;\n    variables.forEach(variable => {\n      if (!this.triggers[variable]) {\n        this.triggers[variable] = [];\n      }\n      this.triggers[variable].push(trigger);\n    });\n  }\n\n  /**\n   * 构建问卷依赖表\n   * - 显示逻辑 question->visibleIf\n   * @param {*} survey\n   * @returns\n   */\n  _buildVisibleDependency() {\n    if (this.questions) {\n      this.questions.forEach(question => {\n        if (question.visibleIf) {\n          const trigger = new _trigger__WEBPACK_IMPORTED_MODULE_2__.VisibleTrigger(question.visibleIf, question.name);\n          this._registerTrigger(trigger);\n        }\n      });\n    }\n  }\n\n  /**\n   * 构建跳转逻辑\n   * @param {*} logics\n   */\n  _buildLogic() {\n    if (this.logics === null || this.logics === undefined) {\n      return [];\n    }\n    this.logics.forEach(logic => {\n      const expression = logic.expression;\n      const target = logic.target;\n      const type = logic.type;\n      if (type in TRIGGERS_MAP) {\n        const trigger = new TRIGGERS_MAP[type](expression, target);\n        // console.log('expression type',expression,type)\n        this._registerTrigger(trigger);\n      } else {\n        console.warn('unsupported trigger type ' + type + ' expression ' + expression);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {*} response\n   * @returns\n   */\n  _buildContext(response) {\n    let result = {};\n    Object.keys(response).forEach(key => {\n      let question = this.questionsMapByName[key];\n      result[key] = {\n        value: response[key],\n        items: question.items || []\n      };\n    });\n    return result;\n  }\n\n  /**\n   * 保证survey独立性, 缓存key的格式是 <surveyId>_<key>\n   */\n  _buildCacheKey(surveyId, key) {\n    return surveyId + \"_\" + key;\n  }\n}\n\n//# sourceURL=webpack://$/./src/survey.js?")},"./src/trigger.js":
/*!************************!*\
          !*** ./src/trigger.js ***!
          \************************/
function srcTriggerJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "CompleteTrigger": () => (/* binding */ CompleteTrigger),\n/* harmony export */   "FinishTrigger": () => (/* binding */ FinishTrigger),\n/* harmony export */   "GotoTrigger": () => (/* binding */ GotoTrigger),\n/* harmony export */   "Trigger": () => (/* binding */ Trigger),\n/* harmony export */   "VisibleTrigger": () => (/* binding */ VisibleTrigger)\n/* harmony export */ });\n/* harmony import */ var _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @hanyi/survey-expression-next */ "./node_modules/@hanyi/survey-expression-next/dist/index.js");\n/* harmony import */ var _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/**\n * Trigger基础类\n */\nclass Trigger {\n  constructor(expression, target, triggerOnNextPage) {\n    this.expression = expression;\n    this.target = target;\n    this._evaluator = null;\n    this._variables = [];\n    this._triggerOnNextPage = triggerOnNextPage;\n    this._build();\n  }\n  get triggerOnNextPage() {\n    return this._triggerOnNextPage;\n  }\n  get variables() {\n    return this._variables;\n  }\n  _build() {\n    // console.info(this.expression, \'build expression\')\n    try {\n      this._evaluator = new _hanyi_survey_expression_next__WEBPACK_IMPORTED_MODULE_0__.ExpressionEvaluator(this.expression);\n      this._variables = this._evaluator.getVariables();\n    } catch (error) {\n      console.warn(\'failed to load expression \' + this.expression);\n    }\n  }\n  run(survey, source, context) {\n    if (this._evaluator) {\n      const result = this._evaluator.evaluate(context);\n      console.debug("logic run " + this.expression + " => " + result);\n      if (result && result === true) {\n        this.onSuccess(survey);\n      }\n    }\n  }\n}\n\n/**\n * VisibleTrigger 显示逻辑\n */\nclass VisibleTrigger extends Trigger {\n  constructor(expression, target) {\n    super(expression, target, false);\n  }\n  run(survey, source, context) {\n    if (this._evaluator) {\n      const result = this._evaluator.evaluate(context);\n      console.debug("visible logic run " + this.expression + " => " + result);\n      survey.showQuestion(this.target, result);\n    }\n  }\n}\n\n/**\n * GotoTrigger 跳转逻辑\n */\nclass GotoTrigger extends Trigger {\n  constructor(expression, target) {\n    super(expression, target, false);\n    this.previous_result = false;\n    this._source = null;\n  }\n  run(survey, source, context) {\n    if (this._evaluator) {\n      const result = this._evaluator.evaluate(context);\n      console.debug("goto logic run " + this.expression + " => " + result);\n      if (result != this.previous_result) {\n        if (result) {\n          this._gotoTarget(survey, source);\n        } else {\n          this._restore(survey);\n        }\n      }\n      this.previous_result = result;\n    }\n  }\n  _gotoTarget(survey, source) {\n    this._source = source;\n    console.debug("trigger goto logic " + this.expression);\n    survey.gotoQuestion(source, this.target, true);\n  }\n  _restore(survey) {\n    console.debug("restore goto trigger " + this.expression);\n    survey.gotoQuestion(this._source, this.target, false);\n  }\n}\n\n/**\n * CompleteTrigger 提前结束Trigger\n */\nclass CompleteTrigger extends Trigger {\n  constructor(expression, target) {\n    super(expression, target, true);\n    // console.log(\'CompleteTrigger\',survey, expression, target, true)\n  }\n\n  onSuccess(survey) {\n    // console.log(\'CompleteTrigger true\')\n    survey.finish(true);\n  }\n}\n\n/**\n * FinishTrigger 正常结束Trigger\n */\nclass FinishTrigger extends Trigger {\n  constructor(expression, target) {\n    super(expression, target, true);\n    // console.log(\'FinishTrigger\',survey, expression, target, true)\n  }\n\n  onSuccess(survey) {\n    console.log(\'FinishTrigger false\');\n    survey.finish(false);\n  }\n}\n\n//# sourceURL=webpack://$/./src/trigger.js?')},"./src/util.js":
/*!*********************!*\
          !*** ./src/util.js ***!
          \*********************/
function srcUtilJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "calculateNo": () => (/* binding */ calculateNo),\n/* harmony export */   "reverseMap": () => (/* binding */ reverseMap),\n/* harmony export */   "uuid": () => (/* binding */ uuid)\n/* harmony export */ });\n/**\n * 从对象数组构建反射表，方便查询\n * @param {*} items\n * @param {*} field\n * @returns\n */\nfunction reverseMap(items, field) {\n  let _map = {};\n  for (let index = 0; index < items.length; index++) {\n    const data = items[index];\n    _map[data[field]] = items[index];\n  }\n  return _map;\n}\n\n/**\n * 更新题号 （根据题目的可见属性）\n * @param {*} questions\n */\nfunction calculateNo(questions) {\n  let base = 1;\n  // console.debug(questions, \'calculateNo\')\n  questions.forEach(question => {\n    if (![\'GROUP\', \'SEPARATOR\'].includes(question.type) && question._visible && question._skips <= 0) {\n      question._no = base;\n      // console.debug(question.type + \'calc question no \' + question.code + \' -> \' + base)\n      base = base + 1;\n    }\n  });\n}\n\n/**\n * 生成uuid\n * @returns\n */\nfunction uuid() {\n  var s = [];\n  var hexDigits = "0123456789abcdef";\n  for (var i = 0; i < 36; i++) {\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n  s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010\n  s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n  s[8] = s[13] = s[18] = s[23] = "-";\n  var uuid = s.join("");\n  return uuid;\n}\n\n//# sourceURL=webpack://$/./src/util.js?')}},__webpack_module_cache__={};function __nested_webpack_require_82375__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__nested_webpack_require_82375__),t.exports}(function(){__nested_webpack_require_82375__.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __nested_webpack_require_82375__.d(n,{a:n}),n}})(),function(){__nested_webpack_require_82375__.d=function(e,n){for(var t in n)__nested_webpack_require_82375__.o(n,t)&&!__nested_webpack_require_82375__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){__nested_webpack_require_82375__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){__nested_webpack_require_82375__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var __nested_webpack_exports__=__nested_webpack_require_82375__("./src/index.js");return __nested_webpack_exports__}()}))},83:function(e,n,t){"use strict";var s=t(686),r=(t(6992),t(8674),t(9601),t(7727),t(5827),t(1539),t(3948),t(4916),t(5306),t(657)),i={keys:function(){return[]}};t.g["____D900E30____"]=!0,delete t.g["____D900E30____"],t.g.__uniConfig={globalStyle:{navigationBarTextStyle:"black",navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#F8F8F8",backgroundColor:"#F8F8F8"},condition:{current:0,list:[{name:"",path:"",query:""}]}},t.g.__uniConfig.compilerVersion="3.7.9",t.g.__uniConfig.darkmode=!1,t.g.__uniConfig.themeConfig={},t.g.__uniConfig.uniPlatform="h5",t.g.__uniConfig.appId="__UNI__D900E30",t.g.__uniConfig.appName="survey-ui-next-uni2",t.g.__uniConfig.appVersion="1.0.0",t.g.__uniConfig.appVersionCode="100",t.g.__uniConfig.router={mode:"hash",base:"./"},t.g.__uniConfig.publicPath="./",t.g.__uniConfig["async"]={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:6e4},t.g.__uniConfig.debug=!1,t.g.__uniConfig.networkTimeout={request:6e4,connectSocket:6e4,uploadFile:6e4,downloadFile:6e4},t.g.__uniConfig.sdkConfigs={},t.g.__uniConfig.qqMapKey=void 0,t.g.__uniConfig.googleMapKey=void 0,t.g.__uniConfig.aMapKey=void 0,t.g.__uniConfig.aMapSecurityJsCode=void 0,t.g.__uniConfig.aMapServiceHost=void 0,t.g.__uniConfig.locale="zh-Hans",t.g.__uniConfig.fallbackLocale=void 0,t.g.__uniConfig.locales=i.keys().reduce((function(e,n){var t=n.replace(/\.\/(uni-app.)?(.*).json/,"$2"),s=i(n);return Object.assign(e[t]||(e[t]={}),s.common||s),e}),{}),t.g.__uniConfig.nvue={"flex-direction":"column"},t.g.__uniConfig.__webpack_chunk_load__=t.e,r["default"].component("pages-bridge",(function(e){var n={component:t.e(759).then(function(){return e(t(9277))}.bind(null,t))["catch"](t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),t.g.__uniRoutes=[{path:"/",alias:"/pages/bridge",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isEntry:!0},__uniConfig.globalStyle,{navigationStyle:"custom"})},[e("pages-bridge",{slot:"page"})])}},meta:{id:1,name:"pages-bridge",isNVue:!1,maxWidth:0,pagePath:"pages/bridge",isQuit:!0,isEntry:!0,windowTop:0}},{path:"/choose-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-choose-location",{slot:"page"})])}},meta:{name:"choose-location",pagePath:"/choose-location"}},{path:"/open-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-open-location",{slot:"page"})])}},meta:{name:"open-location",pagePath:"/open-location"}}],t.g.UniApp&&new t.g.UniApp;t(9526);var o,a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("App",{attrs:{keepAliveInclude:e.keepAliveInclude}})},_=[],u=t(6407),l=t(4587),c=(t(6699),t(2222),t(5666)),p=t(1612),d=t(6613),h=t(547),g=t(9906),m=function(e){(0,h.Z)(t,e);var n=(0,g.Z)(t);function t(){return(0,p.Z)(this,t),n.apply(this,arguments)}return(0,d.Z)(t,[{key:"request",value:function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.request(n);case 2:if(t=e.sent,!Array.isArray(t)){e.next=9;break}if(t[0]){e.next=6;break}return e.abrupt("return",t[1]);case 6:throw t[0];case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()},{key:"getStorageSync",value:function(e){return uni.getStorageSync(e)}},{key:"setStorageSync",value:function(e,n){return uni.setStorageSync(e,n)}},{key:"removeStorageSync",value:function(e){console.log("removeStorageSync",e),uni.removeStorageSync(e)}}]),t}(c.Adapter);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"production",s=e||getApp();if(!s)throw"should run init in uniapp project";if(!["development","test","production"].includes)throw"invalid env "+t;if(c.state.service)console.warn("already setup!");else{s.globalData._hy_options=n;var r=new m,i=new c.SurveyService(r,t);s.globalData._hy_state=c.state,s.globalData._hy_subscribe=c.subscribe,s.globalData._hy_unsubscribe=c.unsubscribe,window&&(window._hy_service=i),window&&(window._hy_state=c.state)}}var f,b={onLaunch:function(){var e="production";console.log("App Launch with env "+e),v(this,{},e)},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}},y=b,x=(t(8703),t(9453)),k=(0,x.Z)(y,a,_,!1,null,null,null,!1,o,f),E=k.exports;t(2789);r["default"].config.productionTip=!1,E.mpType="app";var w=new r["default"]((0,s.Z)({},E));w.$mount()},2789:function(e,n,t){var s=t(6587)["default"];t(1539),uni.addInterceptor({returnValue:function(e){return!e||"object"!==s(e)&&"function"!==typeof e||"function"!==typeof e.then?e:new Promise((function(n,t){e.then((function(e){return e[0]?t(e[0]):n(e[1])}))}))}})},9953:function(e,n,t){"use strict";t.r(n);var s=t(8081),r=t.n(s),i=t(3645),o=t.n(i),a=o()(r());a.push([e.id,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*每个页面公共css */",""]),n["default"]=a}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0,t.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];__webpack_require__.O=function(n,t,s,r){if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],s=e[u][1],r=e[u][2];for(var o=!0,a=0;a<t.length;a++)(!1&r||i>=r)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](t[a])}))?t.splice(a--,1):(o=!1,r<i&&(i=r));if(o){e.splice(u--,1);var _=s();void 0!==_&&(n=_)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,s,r]}}(),function(){__webpack_require__.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(n,{a:n}),n}}(),function(){__webpack_require__.d=function(e,n){for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(n,t){return __webpack_require__.f[t](e,n),n}),[]))}}(),function(){__webpack_require__.u=function(e){return"static/js/pages-bridge_0.1.1.js"}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="survey-ui-next:";__webpack_require__.l=function(t,s,r,i){if(e[t])e[t].push(s);else{var o,a;if(void 0!==r)for(var _=document.getElementsByTagName("script"),u=0;u<_.length;u++){var l=_[u];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+r){o=l;break}}o||(a=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",n+r),o.src=t),e[t]=[s];var c=function(n,s){o.onerror=o.onload=null,clearTimeout(p);var r=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(s)})),n)return n(s)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),a&&document.head.appendChild(o)}}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){__webpack_require__.p="./"}(),function(){var e={826:0};__webpack_require__.f.j=function(n,t){var s=__webpack_require__.o(e,n)?e[n]:void 0;if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(t,r){s=e[n]=[t,r]}));t.push(s[2]=r);var i=__webpack_require__.p+__webpack_require__.u(n),o=new Error,a=function(t){if(__webpack_require__.o(e,n)&&(s=e[n],0!==s&&(e[n]=void 0),s)){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;o.message="Loading chunk "+n+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,s[1](o)}};__webpack_require__.l(i,a,"chunk-"+n,n)}},__webpack_require__.O.j=function(n){return 0===e[n]};var n=function(n,t){var s,r,i=t[0],o=t[1],a=t[2],_=0;if(i.some((function(n){return 0!==e[n]}))){for(s in o)__webpack_require__.o(o,s)&&(__webpack_require__.m[s]=o[s]);if(a)var u=a(__webpack_require__)}for(n&&n(t);_<i.length;_++)r=i[_],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(u)},t=self["webpackChunksurvey_ui_next"]=self["webpackChunksurvey_ui_next"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(83)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();